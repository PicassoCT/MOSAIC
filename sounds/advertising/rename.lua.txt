local function scandir(directory)
    local i, t, popen = 0, {}, io.popen
    local pfile = popen('ls -a "'..directory..'"')
    for filename in pfile:lines() do
        i = i + 1
        t[i] = filename
    end
    pfile:close()
    return t
end

local files = scandir("D:\\DelMe\\spring106\\games\\Mosaic.sdd\\sounds\\advertising")

for i, file in pairs(files) do
  if string.find(file, "advertisemen") and not string.find(file, "advertisement") then
    newFileName = string.gsub(file, "advertisemen", "advertisement")
    os.rename(file, newFileName) 
  end
end
